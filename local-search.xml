<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Netty-doc</title>
    <link href="/2021/08/18/Netty-doc/"/>
    <url>/2021/08/18/Netty-doc/</url>
    
    <content type="html"><![CDATA[<h1 id="Netty-translate"><a href="#Netty-translate" class="headerlink" title="Netty-translate"></a>Netty-translate</h1><ol><li><p><a href="https://netty.io/4.1/api/io/netty/channel/nio/NioEventLoopGroup.html"><code>NioEventLoopGroup</code></a> is a multithreaded event loop that handles I/O operation. Netty provides various <a href="https://netty.io/4.1/api/io/netty/channel/EventLoopGroup.html"><code>EventLoopGroup</code></a> implementations for different kind of transports. We are implementing a server-side application in this example, and therefore two <a href="https://netty.io/4.1/api/io/netty/channel/nio/NioEventLoopGroup.html"><code>NioEventLoopGroup</code></a> will be used. The first one, often called ‘boss’, accepts an incoming connection. The second one, often called ‘worker’, handles the traffic of the accepted connection once the boss accepts the connection and registers the accepted connection to the worker. How many Threads are used and how they are mapped to the created <a href="https://netty.io/4.1/api/io/netty/channel/Channel.html"><code>Channel</code></a>s depends on the <a href="https://netty.io/4.1/api/io/netty/channel/EventLoopGroup.html"><code>EventLoopGroup</code></a> implementation and may be even configurable via a constructor.</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tex">Nio事件循环组是一个处理I/O操作的多线程事件循环,Netty 给不同的运输工具提供了丰富的事件循环组实现.我们在这个例子中实现了一个服务器端程序,因此要用到两个Nio事件循环组.第一个通常叫做&#x27;boss&#x27;,接收一个刚进入的连接.<br><br>第二个(事件循环组)通常叫做&#x27;worker&#x27;,当boss接收连接然后将连接注册给worker,(woeker)用来处理被接受的连接交易(运输).<br><br>有多少线程被使用以及他们怎样传递信息给所创建的通道取决于事件循环组的实现甚至可能是构造器的配置<br></code></pre></td></tr></table></figure></li><li><p><a href="https://netty.io/4.1/api/io/netty/bootstrap/ServerBootstrap.html"><code>ServerBootstrap</code></a> is a helper class that sets up a server. You can set up the server using a <a href="https://netty.io/4.1/api/io/netty/channel/Channel.html"><code>Channel</code></a> directly. However, please note that this is a tedious process, and you do not need to do that in most cases.</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tex">服务器引导是一个用来搭建服务器的帮助类.<br><br>你可以使用一个通道直接搭建一个服务器(server)<br><br>然而,请记住这是一个令人乏味的过程,大多数情况下您不需要这样做<br><br><br><br></code></pre></td></tr></table></figure></li><li><p>Here, we specify to use the <a href="https://netty.io/4.1/api/io/netty/channel/socket/nio/NioServerSocketChannel.html"><code>NioServerSocketChannel</code></a> class which is used to instantiate a new <a href="https://netty.io/4.1/api/io/netty/channel/Channel.html"><code>Channel</code></a> to accept incoming connections.</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">这里,我们指定使用Nio服务器套接字通道类用来实例化一个新通道来接收新进来的连接<br></code></pre></td></tr></table></figure></li><li><p>The handler specified here will always be evaluated by a newly accepted <a href="https://netty.io/4.1/api/io/netty/channel/Channel.html"><code>Channel</code></a>. The <a href="https://netty.io/4.1/api/io/netty/channel/ChannelInitializer.html"><code>ChannelInitializer</code></a> is a special handler that is purposed to help a user configure a new <a href="https://netty.io/4.1/api/io/netty/channel/Channel.html"><code>Channel</code></a>. It is most likely that you want to configure the <a href="https://netty.io/4.1/api/io/netty/channel/ChannelPipeline.html"><code>ChannelPipeline</code></a> of the new <a href="https://netty.io/4.1/api/io/netty/channel/Channel.html"><code>Channel</code></a> by adding some handlers such as <code>DiscardServerHandler</code> to implement your network application. As the application gets complicated, it is likely that you will add more handlers to the pipeline and extract this anonymous class into a top-level class eventually.</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tex">这里这个被指定的处理程序将始终由新接收的通道进行评估<br><br>通道初始化器是一个特殊的处理程序目的是为了帮助使用者配置一个新通道<br><br>您很可能希望通过添加一些处理程序（如DiscardServerHandler）来配置新通道的通道管道，以实现网络应用程序。<br><br>随着应用程序变得复杂，您可能会向管道中添加更多处理程序，并最终将该匿名类提取到顶级类中。<br></code></pre></td></tr></table></figure></li><li><p>You can also set the parameters which are specific to the <code>Channel</code> implementation. We are writing a TCP/IP server, so we are allowed to set the socket options such as <code>tcpNoDelay</code> and <code>keepAlive</code>. Please refer to the apidocs of <a href="https://netty.io/4.1/api/io/netty/channel/ChannelOption.html"><code>ChannelOption</code></a> and the specific <a href="https://netty.io/4.1/api/io/netty/channel/ChannelConfig.html"><code>ChannelConfig</code></a> implementations to get an overview about the supported <code>ChannelOption</code>s.</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tex">您可以给指定的通道实现设置参数<br><br>我们写了TCP/IP服务器,所以允许我们设置套接字选项例如 tcpnodelay 和 keepAlive<br><br>请根据 通道选择的 api文档 以及指定的通道配置实现 来概览被支持的通道选项<br></code></pre></td></tr></table></figure></li><li><p>Did you notice <code>option()</code> and <code>childOption()</code>? <code>option()</code> is for the <a href="https://netty.io/4.1/api/io/netty/channel/socket/nio/NioServerSocketChannel.html"><code>NioServerSocketChannel</code></a> that accepts incoming connections. <code>childOption()</code> is for the <a href="https://netty.io/4.1/api/io/netty/channel/Channel.html"><code>Channel</code></a>s accepted by the parent <a href="https://netty.io/4.1/api/io/netty/channel/ServerChannel.html"><code>ServerChannel</code></a>, which is <a href="https://netty.io/4.1/api/io/netty/channel/socket/nio/NioSocketChannel.html"><code>NioSocketChannel</code></a> in this case.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">你注意到了选项和子选项了吗?选项是为了Nio服务套接字通道来接收进入的连接的.<br><br>子选项是给父服务通道所接收的通道的,在本例中是NioSocketChannel<br><br><br></code></pre></td></tr></table></figure></li><li><p>We are ready to go now. What’s left is to bind to the port and to start the server. Here, we bind to the port <code>8080</code> of all NICs (network interface cards) in the machine. You can now call the <code>bind()</code> method as many times as you want (with different bind addresses.)</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">我们准备好开始了,最后剩下的就是绑定接口然后启动这个服务器.<br><br>这里,我们给所有的网络接口卡绑定8080这个端口号<br><br>你可以现在调用bind()方法任意次数(以不同的绑定地址)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
